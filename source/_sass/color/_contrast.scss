@use 'sass:color';
@use 'sass:math';

@use 'color-tokens' as *;

// AAA contrast is 7:1.
$ratio: 7;

@function formula($value) {
  @if ($value <= 0.03928) {
    $value: math.div($value, 12.92);
  } @else {
    $value: math.pow( math.div(($value + 0.055), 1.055), 2.4);
  }

  @return $value;
}

@function luminance($color) {
  $red: formula(math.div(color.red($color), 255));
  $green: formula(math.div(color.green($color), 255));
  $blue: formula(math.div(color.blue($color), 255));

  $luminance: ($red * 0.2126 + $green * 0.7152 + $blue * 0.0722) + 0.05;

  @return $luminance;
}

@function contrast($color1, $color2) {
  $contrast: 0;

  $color1-l: luminance($color1);
  $color2-l: luminance($color2);

  @if ($color1-l > $color2-l) {
    $contrast: math.div(($color1-l), ($color2-l));
  } @else {
    $contrast: math.div(($color2-l), ($color1-l));
  }

  @return $contrast;
}
